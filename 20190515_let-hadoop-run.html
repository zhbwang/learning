
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>让Hadoop在MacOS上跑起来 · 文斌的学习笔记</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="wangzb">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-navigator/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="20190517_the-first-mapreduce-program.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" >
            
                <a target="_blank" href="http://localhost/life">
            
                    
                    life
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    前言
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    

    
        
        <li class="header">学习之道</li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    知识体系构建
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="20190606_how-to-build-your-own-knowledge-base.html">
            
                <a href="20190606_how-to-build-your-own-knowledge-base.html">
            
                    
                    如何建立自己的知识库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">技术学习</li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <span>
            
                    
                    大数据学习之路
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" >
            
                <span>
            
                    
                    初识Hadoop
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.1.1.1" data-path="20190515_let-hadoop-run.html">
            
                <a href="20190515_let-hadoop-run.html">
            
                    
                    让Hadoop在MacOS上跑起来
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.2" data-path="20190517_the-first-mapreduce-program.html">
            
                <a href="20190517_the-first-mapreduce-program.html">
            
                    
                    第一个MapReduce程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.3" data-path="20190517_detailed-hadoop-commands.html">
            
                <a href="20190517_detailed-hadoop-commands.html">
            
                    
                    Hadoop常用命令详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.4" data-path="20190517_develop-mapreduce-program-with-idea.html">
            
                <a href="20190517_develop-mapreduce-program-with-idea.html">
            
                    
                    使用IDEA开发MapReduce程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.1.5" data-path="20190522_principle-and-architecture-analysis-of-hadoop .html">
            
                <a href="20190522_principle-and-architecture-analysis-of-hadoop .html">
            
                    
                    Hadoop原理与架构解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.1.2" >
            
                <span>
            
                    
                    更高效的WordCount——Hive
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.2.1" data-path="20190525_installation-and-use-of-hive.html">
            
                <a href="20190525_installation-and-use-of-hive.html">
            
                    
                    Hive安装与使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.2" data-path="20190527_implementation-of-wordcount-by-hive.html">
            
                <a href="20190527_implementation-of-wordcount-by-hive.html">
            
                    
                    Hive实现wordcount词频统计
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.3" data-path="20190529_architecture-and-principle-of-hive.html">
            
                <a href="20190529_architecture-and-principle-of-hive.html">
            
                    
                    Hive原理详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.4" data-path="20190609_commands-of-hive.html">
            
                <a href="20190609_commands-of-hive.html">
            
                    
                    Hive常用命令
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.1.3" >
            
                <span>
            
                    
                    数据采集与交换
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.3.1" >
            
                <span>
            
                    
                    Sqoop
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3.2" >
            
                <span>
            
                    
                    Flume
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3.3" >
            
                <span>
            
                    
                    DataX
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.1.4" >
            
                <span>
            
                    
                    快一点吧，我的SQL——Spark&SparkSQL
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.5" >
            
                <span>
            
                    
                    一次采集、多次消费——Kafka
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.6" >
            
                <span>
            
                    
                    调度监控系统——Apache Oozie
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.7" >
            
                <span>
            
                    
                    实时计算——Storm、SparkStreaming、Flink
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.8" >
            
                <span>
            
                    
                    数据对外访问
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.9" >
            
                <span>
            
                    
                    机器学习
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2" >
            
                <span>
            
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="20180712_commands-of-linux.html">
            
                <a href="20180712_commands-of-linux.html">
            
                    
                    Linux常用命令
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" >
            
                <span>
            
                    
                    开发工具
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.1" data-path="20190426_installation-of-python-on-macos.html">
            
                <a href="20190426_installation-of-python-on-macos.html">
            
                    
                    MacOS中Python环境搭建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.4" >
            
                <span>
            
                    
                    工具使用
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.4.1" data-path="20180603_introduction-of-markdown.html">
            
                <a href="20180603_introduction-of-markdown.html">
            
                    
                    初步认识Markdown
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.2" data-path="20190214_git-code-transfer-to-gitee.html">
            
                <a href="20190214_git-code-transfer-to-gitee.html">
            
                    
                    Git代码转移到码云相关命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.3" data-path="20190603_doduwiki-installation-on-macos.html">
            
                <a href="20190603_doduwiki-installation-on-macos.html">
            
                    
                    DokuWiki安装小记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.4" data-path="20190513_fast-connection-of-ssh-with-iterm.html">
            
                <a href="20190513_fast-connection-of-ssh-with-iterm.html">
            
                    
                    iTerm2快速SSH连接并保存密码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.5" >
            
                <span>
            
                    
                    MacOS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.5.1" data-path="20190603_macos_brew_update_too_slow.html">
            
                <a href="20190603_macos_brew_update_too_slow.html">
            
                    
                    MacOS的brew update很慢问题解决方案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.2" data-path="20190603_php_installation_on_macos.html">
            
                <a href="20190603_php_installation_on_macos.html">
            
                    
                    MacOS下安装PHP与nginx配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.3" data-path="20180904_ popular-app-in-MacOS.html">
            
                <a href="20180904_ popular-app-in-MacOS.html">
            
                    
                    MacOS中有哪些比较好的软件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >让Hadoop在MacOS上跑起来</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="&#x8BA9;Hadoop&#x5728;MacOS&#x4E0A;&#x8DD1;&#x8D77;&#x6765;">&#x8BA9;Hadoop&#x5728;MacOS&#x4E0A;&#x8DD1;&#x8D77;&#x6765;</h1>
<blockquote>
<p>&#x5927;&#x6570;&#x636E;&#x5B66;&#x4E60;&#x4E4B;&#x8DEF;&#x7CFB;&#x5217;01</p>
<p>&#x5DF2;&#x53D1;&#x5E03;&#x535A;&#x5BA2;&#xFF1A;&#x817E;&#x8BAF;&#x4E91;&#x793E;&#x533A;&#x3001;CSDN&#x535A;&#x5BA2;&#x3001;&#x8BED;&#x96C0;&#x3002;</p>
</blockquote>
<p>&#x672C;&#x5B89;&#x88C5;&#x6587;&#x6863;&#x662F;&#x5728;MacOS&#x4E2D;&#x5B89;&#x88C5;&#x5355;&#x673A;&#x7248;Hadoop&#x3002;</p>
<h2 id="&#x5B89;&#x88C5;&#x76EE;&#x5F55;">1. &#x5B89;&#x88C5;&#x76EE;&#x5F55;</h2>
<pre><code>WZB-MacBook:50_bigdata wangzhibin$ pwd
/Users/wangzhibin/00_dev_suite/50_bigdata
</code></pre><h2 id="&#x51C6;&#x5907;&#x5DE5;&#x4F5C;">2. &#x51C6;&#x5907;&#x5DE5;&#x4F5C;</h2>
<h3 id="JDK">2.1. JDK</h3>
<p>Mac&#x5B89;&#x88C5;JDK&#x7684;&#x8FC7;&#x7A0B;&#x7565;&#xFF0C;&#x53C2;&#x8003;&#xFF1A;<a href="https://blog.csdn.net/tianxiawuzhei/article/details/48263789" target="_blank">MAC&#x4E0B;&#x5B89;&#x88C5;&#x591A;&#x7248;&#x672C;JDK&#x548C;&#x5207;&#x6362;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;</a></p>
<pre><code>WZB-MacBook:50_bigdata wangzhibin$ java -version
java version &quot;1.7.0_80&quot;
Java(TM) SE Runtime Environment (build 1.7.0_80-b15)
Java HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)
WZB-MacBook:50_bigdata wangzhibin$ echo $JAVA_HOME
/Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home
</code></pre><h2 id="&#x4E0B;&#x8F7D;Hadoop">3. &#x4E0B;&#x8F7D;Hadoop</h2>
<pre><code>brew install wget
wget https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/core/hadoop-2.8.4/hadoop-2.8.4.tar.gz
WZB-MacBook:50_bigdata wangzhibin$ tar -zxvf hadoop-2.8.4.tar.gz
</code></pre><h2 id="&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;Hadoop">4. &#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;Hadoop</h2>
<h3 id="&#x4FEE;&#x6539;JDK&#x914D;&#x7F6E;">4.1. &#x4FEE;&#x6539;JDK&#x914D;&#x7F6E;</h3>
<pre><code>WZB-MacBook:hadoop-2.8.4 wangzhibin$ vi etc/hadoop/hadoop-env.sh
export JAVA_HOME=${JAVA_HOME}&#x6539;&#x4E3A;
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home
</code></pre><h3 id="&#x9A8C;&#x8BC1;Hadoop">4.2. &#x9A8C;&#x8BC1;Hadoop</h3>
<pre><code>WZB-MacBook:hadoop-2.8.4 wangzhibin$ bin/hadoop
Usage: hadoop [--config confdir] [COMMAND | CLASSNAME]
  CLASSNAME            run the class named CLASSNAME
 or
  where COMMAND is one of:
  fs                   run a generic filesystem user client
  version              print the version
  jar &lt;jar&gt;            run a jar file
                       note: please use &quot;yarn jar&quot; to launch
                             YARN applications, not this command.
  checknative [-a|-h]  check native hadoop and compression libraries availability
  distcp &lt;srcurl&gt; &lt;desturl&gt; copy file or directories recursively
  archive -archiveName NAME -p &lt;parent path&gt; &lt;src&gt;* &lt;dest&gt; create a hadoop archive
  classpath            prints the class path needed to get the
  credential           interact with credential providers
                       Hadoop jar and the required libraries
  daemonlog            get/set the log level for each daemon
  trace                view and modify Hadoop tracing settings

Most commands print help when invoked w/o parameters.
</code></pre><h3 id="&#x5355;&#x673A;&#x6A21;&#x5F0F;&#x6267;&#x884C;">4.3. &#x5355;&#x673A;&#x6A21;&#x5F0F;&#x6267;&#x884C;</h3>
<pre><code>  $ mkdir input
  $ cp etc/hadoop/*.xml input
  $ bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.8.4.jar grep input output &apos;dfs[a-z.]+&apos;
  $ cat output/*
  1    dfsadmin
</code></pre><h3 id="&#x914D;&#x7F6E;core-site_xml">4.4. &#x914D;&#x7F6E;core-site.xml</h3>
<pre><code>WZB-MacBook:hadoop-2.8.4 wangzhibin$ mkdir -p hdfs/tmp
WZB-MacBook:hadoop-2.8.4 wangzhibin$ vi etc/hadoop/core-site.xml
</code></pre><p>&#x589E;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</p>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;/Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/hdfs/tmp&lt;/value&gt;
        &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><h3 id="&#x914D;&#x7F6E;hdfs-site_xml">4.5. &#x914D;&#x7F6E;hdfs-site.xml</h3>
<pre><code>WZB-MacBook:hadoop-2.8.4 wangzhibin$ vi etc/hadoop/hdfs-site.xml
</code></pre><p>&#x589E;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</p>
<pre><code>&lt;configuration&gt;
        &lt;property&gt;
             &lt;name&gt;dfs.replication&lt;/name&gt;
             &lt;value&gt;1&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
             &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
             &lt;value&gt;/Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/hdfs/tmp/dfs/name&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
             &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
             &lt;value&gt;/Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/hdfs/tmp/dfs/data&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><h2 id="&#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;Hadoop">5. &#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;Hadoop</h2>
<h3 id="&#x914D;&#x7F6E;_bash_profile">5.1. &#x914D;&#x7F6E;.bash_profile</h3>
<pre><code># set hadoop
export HADOOP_HOME=/Users/wangzhibin/00_dev_suite/50_bigdata/hadoop
export PATH=$PATH:$HADOOP_HOME/bin
</code></pre><h3 id="&#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;hdfs&#x9700;&#x8981;&#x683C;&#x5F0F;&#x5316;">5.2. &#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;hdfs&#x9700;&#x8981;&#x683C;&#x5F0F;&#x5316;</h3>
<pre><code>WZB-MacBook:hadoop-2.8.4 wangzhibin$ ./bin/hdfs namenode -format
...
19/05/15 22:30:47 INFO common.Storage: Storage directory /Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/hdfs/tmp/dfs/name has been successfully formatted.
...
</code></pre><h3 id="&#x542F;&#x52A8;HDFS">5.3. &#x542F;&#x52A8;HDFS</h3>
<pre><code>./sbin/start-dfs.sh
</code></pre><h3 id="&#x505C;&#x6B62;HDFS">5.4. &#x505C;&#x6B62;HDFS</h3>
<pre><code>./sbin/stop-dfs.sh
</code></pre><h3 id="HDFS&#x542F;&#x52A8;&#x72B6;&#x6001;&#x67E5;&#x770B;">5.5. HDFS&#x542F;&#x52A8;&#x72B6;&#x6001;&#x67E5;&#x770B;</h3>
<ol>
<li>HDFS &#x72B6;&#x6001;&#xFF1A;<a href="http://localhost:50070/dfshealth.html#tab-overview" target="_blank">http://localhost:50070/dfshealth.html#tab-overview</a></li>
<li>Secordary NameNode &#x72B6;&#x6001;&#xFF1A;<a href="http://localhost:50090/status.html" target="_blank">http://localhost:50090/status.html</a></li>
<li>&#x672C;&#x5730;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="file:///Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/share/doc/hadoop/index.html" target="_blank">API&#x6587;&#x6863;</a></li>
</ol>
<p><img src="http://pic.iloc.cn/2019-06-05-image-20190516111958695.png" alt="image-20190516111958695"></p>
<h3 id="&#x9A8C;&#x8BC1;HDFS">5.6. &#x9A8C;&#x8BC1;HDFS</h3>
<p>&#x7B80;&#x5355;&#x7684;&#x9A8C;&#x8BC1;hadoop&#x547D;&#x4EE4;&#xFF1A;</p>
<pre><code>$ hadoop fs -mkdir /test
WZB-MacBook:hadoop wangzhibin$ hadoop fs -ls /
Found 1 items
drwxr-xr-x   - wangzhibin supergroup          0 2019-05-16 11:26 /test
</code></pre><p><img src="http://pic.iloc.cn/2019-06-05-image-20190516112818680.png" alt="image-20190516112818680"></p>
<h3 id="&#x542F;&#x52A8;&#x65F6;&#x9047;&#x5230;&#x7684;&#x5751;">5.7. &#x542F;&#x52A8;&#x65F6;&#x9047;&#x5230;&#x7684;&#x5751;</h3>
<h4 id="&#x4E00;&#x3001;sh:_connect_to_host_localhost_port_22:_Connection_refused">5.7.1. &#x4E00;&#x3001;sh: connect to host localhost port 22: Connection refused</h4>
<p>&#x6B64;&#x65F6;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#x3002;&#x662F;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x914D;&#x7F6E;ssh&#x514D;&#x5BC6;&#x767B;&#x5F55;&#x3002;</p>
<pre><code>WZB-MacBook:hadoop-2.8.4 wangzhibin$ ./sbin/start-dfs.sh
19/05/15 22:38:25 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
Starting namenodes on [localhost]
localhost: ssh: connect to host localhost port 22: Connection refused
localhost: ssh: connect to host localhost port 22: Connection refused
Starting secondary namenodes [0.0.0.0]
0.0.0.0: ssh: connect to host 0.0.0.0 port 22: Connection refused
19/05/15 22:38:28 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
</code></pre><p>&#x91C7;&#x7528;&#x5982;&#x4E0B;&#x65B9;&#x6CD5;&#x89E3;&#x51B3;&#xFF1A;
1&#xFF09;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x9009;&#x62E9;&#x7CFB;&#x7EDF;&#x504F;&#x597D;&#x8BBE;&#x7F6E;-&gt;&#x9009;&#x62E9;&#x5171;&#x4EAB;-&gt;&#x70B9;&#x51FB;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;
2&#xFF09;&#x8BBE;&#x7F6E;&#x514D;&#x5BC6;&#x767B;&#x5F55;</p>
<pre><code>    $ ssh-keygen -t rsa -P &apos;&apos; -f ~/.ssh/id_rsa
    $ cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
    $ chmod 0600 ~/.ssh/authorized_keys
    $ ssh localhost
</code></pre><h4 id="&#x4E8C;&#x3001;Unable_to_load_native-hadoop_library_for_your_platform">5.7.2. &#x4E8C;&#x3001;Unable to load native-hadoop library for your platform</h4>
<pre><code>WZB-MacBook:hadoop-2.8.4 wangzhibin$ ./sbin/start-dfs.sh
19/05/15 22:50:02 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
Starting namenodes on [localhost]
localhost: starting namenode, logging to /Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/logs/hadoop-wangzhibin-namenode-WZB-MacBook.local.out
localhost: starting datanode, logging to /Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/logs/hadoop-wangzhibin-datanode-WZB-MacBook.local.out
Starting secondary namenodes [0.0.0.0]
0.0.0.0: starting secondarynamenode, logging to /Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/logs/hadoop-wangzhibin-secondarynamenode-WZB-MacBook.local.out
19/05/15 22:50:17 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
</code></pre><p>&#x53C2;&#x8003;&#xFF1A;</p>
<ol>
<li><p><a href="http://hadoop.apache.org/docs/r2.6.0/hadoop-project-dist/hadoop-common/NativeLibraries.html" target="_blank">&#x5B98;&#x65B9;-Native Libraries Guide</a></p>
</li>
<li><p><a href="https://rockyfeng.me/hadoop_native_library_mac.html" target="_blank">Mac OSX &#x4E0B; Hadoop &#x4F7F;&#x7528;&#x672C;&#x5730;&#x5E93;&#x63D0;&#x9AD8;&#x6548;&#x7387;</a></p>
</li>
<li><p><a href="https://medium.com/@faizanahemad/hadoop-native-libraries-installation-on-mac-osx-d8338a6923db" target="_blank">Hadoop native libraries: Installation on Mac Osx</a></p>
</li>
</ol>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;hadoop&#xFF0C;&#x5C06;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>hadoop-dist/target/hadoop-2.8.4/lib/native</code>&#x66FF;&#x6362;<code>$HADOOP_HOME/lib/native</code>&#x3002;</p>
<ol>
<li><p>&#x5B89;&#x88C5;&#x57FA;&#x7840;&#x7EC4;&#x4EF6;</p>
<pre><code>$ brew install gcc autoconf automake libtool cmake snappy gzip bzip2 zlib
</code></pre></li>
<li><p>&#x5B89;&#x88C5;protobuf&#x3002;</p>
</li>
</ol>
<pre><code>   wget https://github.com/google/protobuf/releases/download/v2.5.0/protobuf-2.5.0.tar.gz
   tar zxvf protobuf-2.5.0.tar.gz
   cd protobuf-2.5.0
   ./configure
   make
   make install
</code></pre><ol>
<li><p>&#x91CD;&#x65B0;&#x7F16;&#x8BD1;hadoop</p>
<p><img src="http://pic.iloc.cn/2019-06-05-image-20190516090756397.png" alt="image-20190516090756397"></p>
<pre><code>wget http://apache.fayea.com/hadoop/common/hadoop-2.8.4/hadoop-2.8.4-src.tar.gz
tar zxvf hadoop-2.8.4-src.tar.gz
cd hadoop-2.8.4-src
mvn package -Pdist,native -DskipTests -Dtar -e
cp -r /Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4-src/hadoop-dist/target/hadoop-2.8.4/lib/native .
</code></pre></li>
</ol>
<h4 id="&#x4E09;&#x3001;An_Ant_BuildException_has_occured:_exec_returned">5.7.3. &#x4E09;&#x3001;An Ant BuildException has occured: exec returned</h4>
<pre><code>WZB-MacBook:hadoop-2.8.4-src wangzhibin$ mvn package -Pdist,native -DskipTests -Dtar -e
...
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.7:run (make) on project hadoop-pipes: An Ant BuildException has occured: exec returned: 1
[ERROR] around Ant part ...&lt;exec failonerror=&quot;true&quot; dir=&quot;/Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4-src/hadoop-tools/hadoop-pipes/target/native&quot; executable=&quot;cmake&quot;&gt;... @ 5:152 in /Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4-src/hadoop-tools/hadoop-pipes/target/antrun/build-main.xml
[ERROR] -&gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.7:run (make) on project hadoop-pipes: An Ant BuildException has occured: exec returned: 1
around Ant part ...&lt;exec failonerror=&quot;true&quot; dir=&quot;/Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4-src/hadoop-tools/hadoop-pipes/target/native&quot; executable=&quot;cmake&quot;&gt;... @ 5:152 in /Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4-src/hadoop-tools/hadoop-pipes/target/antrun/build-main.xml
</code></pre><p>&#x53C2;&#x8003;&#xFF1A;<a href="https://blog.csdn.net/lemonZhaoTao/article/details/86770174" target="_blank">mac&#x4E0B;&#x7F16;&#x8BD1;Hadoop 2.8.1&#x62A5;&#x9519;An Ant BuildException has occured: exec returned: 1&#xFF0C;&#x6392;&#x9519;&#x8FC7;&#x7A0B;</a></p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;&#x914D;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;OPENSSL_ROOT_DIR&#x3001;OPENSSL_INCLUDE_DIR&#x3002;&#x4FEE;&#x6539;~/.bash_profile</p>
<pre><code># openssl
export OPENSSL_ROOT_DIR=/usr/local/Cellar/openssl/1.0.2r
export OPENSSL_INCLUDE_DIR=$OPENSSL_ROOT_DIR/include
</code></pre><h2 id="&#x914D;&#x7F6E;&#x4E0E;&#x542F;&#x52A8;yarn">6. &#x914D;&#x7F6E;&#x4E0E;&#x542F;&#x52A8;yarn</h2>
<h3 id="&#x914D;&#x7F6E;mapred-site_xml">6.1. &#x914D;&#x7F6E;mapred-site.xml</h3>
<pre><code>cd $HADOOP_HOME/etc/hadoop/
cp mapred-site.xml.template mapred-site.xml
vim mapred-site.xml

&lt;configuration&gt;
    &lt;!-- &#x901A;&#x77E5;&#x6846;&#x67B6;MR&#x4F7F;&#x7528;YARN --&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><h3 id="&#x914D;&#x7F6E;yarn-site_xml">6.2. &#x914D;&#x7F6E;yarn-site.xml</h3>
<pre><code>vim yarn-site.xml
&lt;configuration&gt;
    &lt;!-- reducer&#x53D6;&#x6570;&#x636E;&#x7684;&#x65B9;&#x5F0F;&#x662F;mapreduce_shuffle --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><h3 id="yarn&#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;">6.3. yarn&#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;</h3>
<p>&#x542F;&#x52A8;</p>
<pre><code>cd $HADOOP_HOME
./sbin/start-yarn.sh
./sbin/stop-yarn.sh
</code></pre><p>&#x6D4F;&#x89C8;&#x5668;&#x67E5;&#x770B;&#xFF1A;<a href="http://localhost:8088" target="_blank">http://localhost:8088</a>
<img src="http://pic.iloc.cn/2019-06-05-image-20190516113842148.png" alt="image-20190516113842148">
jps&#x67E5;&#x770B;&#x8FDB;&#x7A0B;</p>
<pre><code>WZB-MacBook:hadoop wangzhibin$ jps
534 NutstoreGUI
49135 DataNode
49834 ResourceManager
49234 SecondaryNameNode
49973 Jps
67596
49912 NodeManager
49057 NameNode
</code></pre><p>&#x5230;&#x6B64;&#xFF0C;hadoop&#x5355;&#x673A;&#x6A21;&#x5F0F;&#x5C31;&#x914D;&#x7F6E;&#x6210;&#x529F;&#x4E86;&#xFF01;</p>
<h2 id="&#x547D;&#x4EE4;&#x4E0E;&#x9A8C;&#x8BC1;">7. &#x547D;&#x4EE4;&#x4E0E;&#x9A8C;&#x8BC1;</h2>
<pre><code>Resource Manager: http://localhost:50070
JobTracker: http://localhost:8088/
Node Specific Info: http://localhost:8042/
Command
$ jps
$ yarn // For resource management more information than the web interface.
$ mapred // Detailed information about jobs
</code></pre><h2 id="&#x53C2;&#x8003;&#x8D44;&#x6599;">8. &#x53C2;&#x8003;&#x8D44;&#x6599;</h2>
<ol>
<li><a href="http://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-common/SingleCluster.html" target="_blank">Hadoop: Setting up a Single Node Cluster.</a></li>
<li><a href="https://dongkelun.com/2018/03/23/hadoopConf/" target="_blank">centos7 hadoop &#x5355;&#x673A;&#x6A21;&#x5F0F;&#x5B89;&#x88C5;&#x914D;&#x7F6E;</a></li>
<li><a href="https://dtflaneur.wordpress.com/2015/10/02/installing-hadoop-on-mac-osx-el-capitan/" target="_blank">Hadoop in OSX El-Capitan</a></li>
<li><a href="http://dongfeiwww.com/hadoop/2014/09/05/hadoop-on-mac/" target="_blank">Installing Hadoop on Mac OS X 10.9.4</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/51159709" target="_blank">macOS&#x4E0A;&#x642D;&#x5EFA;&#x4F2A;&#x5206;&#x5E03;&#x5F0F;Hadoop&#x73AF;&#x5883;</a></li>
<li><a href="file:///Users/wangzhibin/00_dev_suite/50_bigdata/hadoop-2.8.4/share/doc/hadoop/index.html" target="_blank">&#x672C;&#x5730;&#x5B98;&#x65B9;API&#x6587;&#x6863;</a></li>
</ol>
<h2 id="ChangeLog">9. ChangeLog</h2>
<ul>
<li>20190515 | &#x521B;&#x5EFA;&#x6587;&#x6863; </li>
</ul>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; zhbwang all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2019-06-06 18:03:32
</span></footer><div id="anchors-navbar"><i class="fa fa-anchor"></i><ul><p><a href="#&#x8BA9;Hadoop&#x5728;MacOS&#x4E0A;&#x8DD1;&#x8D77;&#x6765;">&#x8BA9;Hadoop&#x5728;MacOS&#x4E0A;&#x8DD1;&#x8D77;&#x6765;</a></p><li><a href="#&#x5B89;&#x88C5;&#x76EE;&#x5F55;">1. &#x5B89;&#x88C5;&#x76EE;&#x5F55;</a></li><li><a href="#&#x51C6;&#x5907;&#x5DE5;&#x4F5C;">2. &#x51C6;&#x5907;&#x5DE5;&#x4F5C;</a></li><ul><li><a href="#JDK">2.1. JDK</a></li></ul><li><a href="#&#x4E0B;&#x8F7D;Hadoop">3. &#x4E0B;&#x8F7D;Hadoop</a></li><li><a href="#&#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;Hadoop">4. &#x5B89;&#x88C5;&#x4E0E;&#x914D;&#x7F6E;Hadoop</a></li><ul><li><a href="#&#x4FEE;&#x6539;JDK&#x914D;&#x7F6E;">4.1. &#x4FEE;&#x6539;JDK&#x914D;&#x7F6E;</a></li><li><a href="#&#x9A8C;&#x8BC1;Hadoop">4.2. &#x9A8C;&#x8BC1;Hadoop</a></li><li><a href="#&#x5355;&#x673A;&#x6A21;&#x5F0F;&#x6267;&#x884C;">4.3. &#x5355;&#x673A;&#x6A21;&#x5F0F;&#x6267;&#x884C;</a></li><li><a href="#&#x914D;&#x7F6E;core-site_xml">4.4. &#x914D;&#x7F6E;core-site.xml</a></li><li><a href="#&#x914D;&#x7F6E;hdfs-site_xml">4.5. &#x914D;&#x7F6E;hdfs-site.xml</a></li></ul><li><a href="#&#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;Hadoop">5. &#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;Hadoop</a></li><ul><li><a href="#&#x914D;&#x7F6E;_bash_profile">5.1. &#x914D;&#x7F6E;.bash_profile</a></li><li><a href="#&#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;hdfs&#x9700;&#x8981;&#x683C;&#x5F0F;&#x5316;">5.2. &#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;hdfs&#x9700;&#x8981;&#x683C;&#x5F0F;&#x5316;</a></li><li><a href="#&#x542F;&#x52A8;HDFS">5.3. &#x542F;&#x52A8;HDFS</a></li><li><a href="#&#x505C;&#x6B62;HDFS">5.4. &#x505C;&#x6B62;HDFS</a></li><li><a href="#HDFS&#x542F;&#x52A8;&#x72B6;&#x6001;&#x67E5;&#x770B;">5.5. HDFS&#x542F;&#x52A8;&#x72B6;&#x6001;&#x67E5;&#x770B;</a></li><li><a href="#&#x9A8C;&#x8BC1;HDFS">5.6. &#x9A8C;&#x8BC1;HDFS</a></li><li><a href="#&#x542F;&#x52A8;&#x65F6;&#x9047;&#x5230;&#x7684;&#x5751;">5.7. &#x542F;&#x52A8;&#x65F6;&#x9047;&#x5230;&#x7684;&#x5751;</a></li><ul><li><a href="#&#x4E00;&#x3001;sh:_connect_to_host_localhost_port_22:_Connection_refused">5.7.1. &#x4E00;&#x3001;sh: connect to host localhost port 22: Connection refused</a></li><li><a href="#&#x4E8C;&#x3001;Unable_to_load_native-hadoop_library_for_your_platform">5.7.2. &#x4E8C;&#x3001;Unable to load native-hadoop library for your platform</a></li><li><a href="#&#x4E09;&#x3001;An_Ant_BuildException_has_occured:_exec_returned">5.7.3. &#x4E09;&#x3001;An Ant BuildException has occured: exec returned</a></li></ul></ul><li><a href="#&#x914D;&#x7F6E;&#x4E0E;&#x542F;&#x52A8;yarn">6. &#x914D;&#x7F6E;&#x4E0E;&#x542F;&#x52A8;yarn</a></li><ul><li><a href="#&#x914D;&#x7F6E;mapred-site_xml">6.1. &#x914D;&#x7F6E;mapred-site.xml</a></li><li><a href="#&#x914D;&#x7F6E;yarn-site_xml">6.2. &#x914D;&#x7F6E;yarn-site.xml</a></li><li><a href="#yarn&#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;">6.3. yarn&#x542F;&#x52A8;&#x4E0E;&#x505C;&#x6B62;</a></li></ul><li><a href="#&#x547D;&#x4EE4;&#x4E0E;&#x9A8C;&#x8BC1;">7. &#x547D;&#x4EE4;&#x4E0E;&#x9A8C;&#x8BC1;</a></li><li><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;">8. &#x53C2;&#x8003;&#x8D44;&#x6599;</a></li><li><a href="#ChangeLog">9. ChangeLog</a></li></ul></div><a href="#&#x5B89;&#x88C5;&#x76EE;&#x5F55;" id="goTop"><i class="fa fa-arrow-up"></i></a>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="20190517_the-first-mapreduce-program.html" class="navigation navigation-next navigation-unique" aria-label="Next page: 第一个MapReduce程序">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"让Hadoop在MacOS上跑起来","level":"5.1.1.1","depth":3,"next":{"title":"第一个MapReduce程序","level":"5.1.1.2","depth":3,"path":"20190517_the-first-mapreduce-program.md","ref":"20190517_the-first-mapreduce-program.md","articles":[]},"previous":{"title":"初识Hadoop","level":"5.1.1","depth":2,"ref":"","articles":[{"title":"让Hadoop在MacOS上跑起来","level":"5.1.1.1","depth":3,"path":"20190515_let-hadoop-run.md","ref":"20190515_let-hadoop-run.md","articles":[]},{"title":"第一个MapReduce程序","level":"5.1.1.2","depth":3,"path":"20190517_the-first-mapreduce-program.md","ref":"20190517_the-first-mapreduce-program.md","articles":[]},{"title":"Hadoop常用命令详解","level":"5.1.1.3","depth":3,"path":"20190517_detailed-hadoop-commands.md","ref":"20190517_detailed-hadoop-commands.md","articles":[]},{"title":"使用IDEA开发MapReduce程序","level":"5.1.1.4","depth":3,"path":"20190517_develop-mapreduce-program-with-idea.md","ref":"20190517_develop-mapreduce-program-with-idea.md","articles":[]},{"title":"Hadoop原理与架构解析","level":"5.1.1.5","depth":3,"path":"20190522_principle-and-architecture-analysis-of-hadoop .md","ref":"20190522_principle-and-architecture-analysis-of-hadoop .md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-sharing","-livereload","theme-default","-lunr","-search","search-pro","expandable-chapters","simple-page-toc","navigator","tbfed-pagefooter"],"root":"./wiki@learning","styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"simple-page-toc":{"maxDepth":3,"skipFirstH1":true},"tbfed-pagefooter":{"copyright":"Copyright &copy zhbwang","modify_label":"修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"search-pro":{},"expandable-chapters":{},"navigator":{},"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}}},"theme":"default","author":"wangzb","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"文斌的学习笔记","gitbook":"*","description":"文斌的学习笔记","direction":"rtl"},"file":{"path":"20190515_let-hadoop-run.md","mtime":"2019-06-06T10:03:32.292Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-06-10T08:01:12.419Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

